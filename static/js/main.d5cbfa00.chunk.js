(this["webpackJsonpInstrument-Tool"]=this["webpackJsonpInstrument-Tool"]||[]).push([[0],{63:function(e,t,s){},64:function(e,t,s){"use strict";s.r(t);var n=s(0),a=s.n(n),c=s(17),i=s.n(c),r=s(11),o=s(7),h=s(8),l=s(10),j=s(9),u=s(66),d=s(92),b=s(95),p=(s(49),s(35)),O=s(1),x=(n.Component,s(86)),f=s(88),k=s(89),m=s(91),v=s(90),g=Object(x.a)({root:{minWidth:600},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12}});function y(e){console.log("instrumentInfo",e);var t=g(),s=e.instrumentInfo.Identifier,n=e.instrumentInfo.AssetType,a=e.instrumentInfo.Symbol;return Object(O.jsx)(f.a,{className:t.root,children:Object(O.jsxs)(k.a,{children:[Object(O.jsx)(v.a,{className:t.pos,color:"textSecondary",children:e.instrumentInfo.Description}),Object(O.jsx)(m.a,{style:{textTransform:"none"},onClick:function(){navigator.clipboard.writeText(n)},children:Object(O.jsx)(v.a,{variant:"h5",component:"h2",children:n})}),"/",Object(O.jsx)(m.a,{style:{textTransform:"none"},onClick:function(){navigator.clipboard.writeText(a)},children:Object(O.jsx)(v.a,{variant:"h5",component:"h2",children:a})}),"/",Object(O.jsx)(m.a,{style:{textTransform:"none"},onClick:function(){navigator.clipboard.writeText(s)},children:Object(O.jsx)(v.a,{variant:"h5",component:"h2",children:s})}),"/",Object(O.jsx)(m.a,{style:{textTransform:"none"},onClick:function(){e.fetchInstrumentDetails(s)},children:Object(O.jsx)(v.a,{variant:"h5",component:"h2",children:"Details"})})]})})}var I=function(e){Object(l.a)(s,e);var t=Object(j.a)(s);function s(e){return Object(o.a)(this,s),t.call(this,e)}return Object(h.a)(s,[{key:"renderTableData",value:function(){var e=this;if(this.props.instrumentData.length>0)return this.props.instrumentData.map((function(t,s){return Object(O.jsx)("tr",{children:Object(O.jsx)("td",{children:Object(O.jsx)(y,{instrumentInfo:t,fetchInstrumentDetails:e.props.fetchInstrumentDetails.bind(e)})})},"index")}))}},{key:"render",value:function(){return Object(O.jsx)("div",{children:Object(O.jsx)("table",{id:"cards",children:Object(O.jsx)("tbody",{children:this.renderTableData()})})})}}]),s}(n.Component),D=function(e){return e.accessOk?Object(O.jsx)("div",{}):Object(O.jsx)("div",{style:{width:"100%",backgroundColor:"#ff0000"},children:Object(O.jsx)("p",{style:{color:"#ffffff"},children:"Access Token: Invalid"})})},A=function(e){Object(l.a)(s,e);var t=Object(j.a)(s);function s(e){return Object(o.a)(this,s),t.call(this,e)}return Object(h.a)(s,[{key:"render",value:function(){return""!=this.props.uicDetails?Object(O.jsxs)("div",{children:[Object(O.jsx)("h2",{children:"Details for"}),Object(O.jsx)("p",{children:this.props.uicDetails[0].Description}),Object(O.jsx)("div",{children:Object(O.jsx)("pre",{children:JSON.stringify(this.props.uicDetails,null,2)})})]}):Object(O.jsx)("p",{})}}]),s}(n.Component),T=function(e){Object(l.a)(s,e);var t=Object(j.a)(s);function s(e){var n;return Object(o.a)(this,s),(n=t.call(this,e)).state={expand:!1,data:[]},n.setExpandTrue=n.setExpandTrue.bind(Object(r.a)(n)),n.setExpandFalse=n.setExpandFalse.bind(Object(r.a)(n)),n}return Object(h.a)(s,[{key:"fetchInstrumentData",value:function(){var e=this,t="https://gateway.saxobank.com/sim/openapi/ref/v1/instruments/?ExchangeId="+this.props.exchangeInfo.ExchangeId;console.log("Creating instrument table with from:",t),console.log("With Token",this.props.token);var s={method:"GET",headers:{Authorization:"Bearer "+this.props.token}};fetch(t,s).then((function(e){return e.json()})).then((function(t){console.log("Fetch instrument data:",t),e.setState({data:t.Data})}))}},{key:"setExpandTrue",value:function(){this.fetchInstrumentData(),this.setState({expand:!0})}},{key:"setExpandFalse",value:function(){this.setState({expand:!1})}},{key:"render",value:function(){return console.log("this.state ExchangeCard",this.state),!0===this.state.expand?Object(O.jsxs)("div",{children:[Object(O.jsx)("button",{onClick:this.setExpandFalse,children:"Hide Instruments"}),Object(O.jsx)("tr",{children:Object(O.jsx)(I,{instrumentData:this.state.data,fetchInstrumentDetails:this.props.fetchInstrumentDetails})},"ExchangeId")]}):Object(O.jsx)("div",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:this.props.exchangeInfo.ExchangeId}),Object(O.jsx)("td",{children:this.props.exchangeInfo.Mic}),Object(O.jsx)("td",{children:this.props.exchangeInfo.Name}),Object(O.jsx)("td",{children:Object(O.jsx)("button",{onClick:this.setExpandTrue,children:"Get Uics"})})]},"ExchangeId")})}}]),s}(n.Component),C=function(e){Object(l.a)(s,e);var t=Object(j.a)(s);function s(e){return Object(o.a)(this,s),t.call(this,e)}return Object(h.a)(s,[{key:"renderTableData",value:function(){var e=this;return null!=this.props.exchangeData?this.props.exchangeData.Data.map((function(t,s){return Object(O.jsx)("tr",{children:Object(O.jsx)("td",{children:Object(O.jsx)(T,{exchangeInfo:t,token:e.props.token,fetchInstrumentDetails:e.props.fetchInstrumentDetails})})},"Exchanges")})):Object(O.jsx)("p",{children:"Loading data.."})}},{key:"render",value:function(){return Object(O.jsx)("div",{children:Object(O.jsx)("table",{id:"cards",children:Object(O.jsx)("tbody",{children:this.renderTableData()})})})}}]),s}(n.Component),S=function(e){Object(l.a)(s,e);var t=Object(j.a)(s);function s(e){var n;return Object(o.a)(this,s),(n=t.call(this,e)).state={exchangeData:null,uicDetails:""},n.loadNewExchangeData=n.loadNewExchangeData.bind(Object(r.a)(n)),n.fetchInstrumentDetails=n.fetchInstrumentDetails.bind(Object(r.a)(n)),n}return Object(h.a)(s,[{key:"fetchInstrumentDetails",value:function(e){var t=this,s="https://gateway.saxobank.com/sim/openapi/ref/v1/instruments/details/?Uics="+e;console.log("Creating instrument table with from:",s),console.log("With Token",this.props.token);var n={method:"GET",headers:{Authorization:"Bearer "+this.props.token}};fetch(s,n).then((function(e){return e.json()})).then((function(e){console.log("Fetch instrument data:",e),t.setState({uicDetails:e.Data})}))}},{key:"loadNewExchangeData",value:function(){var e=this;localStorage.setItem(w,null);var t={method:"GET",headers:{Authorization:"Bearer "+this.props.token}};fetch("https://gateway.saxobank.com/sim/openapi/ref/v1/exchanges/",t).then((function(t){if(200===t.status)return t.json().then((function(t){var s;e.setState({exchangeData:t}),s=t,localStorage.setItem(w,s)}));401===t.status&&e.props.setAccessInvalid()}))}},{key:"componentDidMount",value:function(){localStorage.getItem(w);this.loadNewExchangeData()}},{key:"render",value:function(){return Object(O.jsxs)("div",{children:[Object(O.jsx)(D,{accessOk:this.props.accessOk}),Object(O.jsx)("br",{}),Object(O.jsxs)("table",{style:{width:"70%"},children:[Object(O.jsxs)("td",{children:[Object(O.jsx)("button",{onClick:this.loadNewExchangeData,children:"Reload Table"}),Object(O.jsx)(C,{exchangeData:this.state.exchangeData,token:this.props.token,fetchInstrumentDetails:this.fetchInstrumentDetails})]}),Object(O.jsx)("td",{children:Object(O.jsx)(A,{uicDetails:this.state.uicDetails,token:this.props.token})})]})]})}}]),s}(n.Component),w="LocalStorageKeyForExchangeData-evxxxgvat3352536326";var E=function(e){Object(l.a)(s,e);var t=Object(j.a)(s);function s(){return Object(o.a)(this,s),t.apply(this,arguments)}return Object(h.a)(s,[{key:"render",value:function(){return this.props.accessOk?Object(O.jsx)("h1",{style:{color:"#00ff00"},children:"Access Token: OK"}):Object(O.jsx)("h1",{style:{color:"#ff0000"},children:"Access Token: Invalid"})}}]),s}(n.Component),N=function(e){Object(l.a)(s,e);var t=Object(j.a)(s);function s(){return Object(o.a)(this,s),t.apply(this,arguments)}return Object(h.a)(s,[{key:"render",value:function(){return this.props.accessOk?Object(O.jsx)("textarea",{value:this.props.token,style:{width:800,backgroundColor:"#00ff00"},rows:6,onChange:this.props.handleChange}):Object(O.jsx)("textarea",{value:this.props.token,style:{width:800,backgroundColor:"#ff0000"},rows:6,onChange:this.props.handleChange})}}]),s}(n.Component),K=function(e){Object(l.a)(s,e);var t=Object(j.a)(s);function s(e){var n;return Object(o.a)(this,s),(n=t.call(this,e)).handleChange=n.handleChange.bind(Object(r.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(r.a)(n)),n.state={clientKey:null,clientId:null,accountKey:null},n}return Object(h.a)(s,[{key:"componentDidMount",value:function(){this.validateToken()}},{key:"handleChange",value:function(e){this.props.setAccessToken(e.target.value)}},{key:"handleSubmit",value:function(e){this.props.storeAccessTokenInLocalStorage(),this.validateToken(),e.preventDefault()}},{key:"validateToken",value:function(){var e=this,t={method:"GET",headers:{Authorization:"Bearer "+this.props.token}};fetch("https://gateway.saxobank.com/sim/openapi/port/v1/accounts/me/",t).then((function(t){200===t.status?(e.props.setAccessOk(),t.json().then((function(t){console.log("jsonData:",t),e.setState({clientKey:t.Data[0].ClientKey,clientId:t.Data[0].ClientId,accountKey:t.Data[0].AccountKey})}))):e.props.setAccessInvalid()}))}},{key:"render",value:function(){return Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{children:[Object(O.jsx)("br",{}),Object(O.jsx)("br",{}),Object(O.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(O.jsxs)("label",{children:[Object(O.jsx)(E,{accessOk:this.props.accessOk}),Object(O.jsx)(N,{accessOk:this.props.accessOk,token:this.props.token,handleChange:this.handleChange})]}),Object(O.jsx)("br",{}),Object(O.jsx)("br",{}),Object(O.jsx)("input",{type:"submit",value:"Validate and store"})]})]}),Object(O.jsx)("br",{}),Object(O.jsx)("br",{}),Object(O.jsx)("hr",{}),Object(O.jsx)("br",{}),Object(O.jsx)("br",{}),Object(O.jsx)("h1",{children:"Account Info"}),Object(O.jsxs)("div",{className:"same-line",children:[Object(O.jsx)("p",{children:"ClientKey  "}),Object(O.jsxs)("p",{children:[this.state.clientKey," "]})]}),Object(O.jsxs)("div",{className:"same-line",children:[Object(O.jsx)("p",{children:"ClientId  "}),Object(O.jsxs)("p",{children:[this.state.clientId," "]})]}),Object(O.jsxs)("div",{className:"same-line",children:[Object(O.jsx)("p",{children:"AccountKey  "}),Object(O.jsxs)("p",{children:[this.state.accountKey," "]})]}),Object(O.jsx)("hr",{})]})}}]),s}(n.Component),L=function(e){Object(l.a)(s,e);var t=Object(j.a)(s);function s(e){var n;return Object(o.a)(this,s),(n=t.call(this,e)).handleSubmit=n.handleSubmit.bind(Object(r.a)(n)),n.handleChange=n.handleChange.bind(Object(r.a)(n)),n.fetchInstrumentDetails=n.fetchInstrumentDetails.bind(Object(r.a)(n)),n.state={keyword:"",data:[],uicDetails:""},n}return Object(h.a)(s,[{key:"handleChange",value:function(e){console.log("handleChange",e.target.value),this.setState({keyword:e.target.value})}},{key:"fetchInstrumentDetails",value:function(e){var t=this,s="https://gateway.saxobank.com/sim/openapi/ref/v1/instruments/details/?Uics="+e;console.log("Creating instrument table with from:",s),console.log("With Token",this.props.token);var n={method:"GET",headers:{Authorization:"Bearer "+this.props.token}};fetch(s,n).then((function(e){return e.json()})).then((function(e){console.log("Fetch instrument data:",e),t.setState({uicDetails:e.Data})}))}},{key:"handleSubmit",value:function(e){var t=this;console.log("handleSubmit",this.state.keyword),e.preventDefault();var s="https://gateway.saxobank.com/sim/openapi/ref/v1/instruments/?Keywords="+this.state.keyword,n={method:"GET",headers:{Authorization:"Bearer "+this.props.token}};fetch(s,n).then((function(e){return e.json()})).then((function(e){t.setState({data:e.Data}),console.log("New state:",t.state)}))}},{key:"render",value:function(){return Object(O.jsxs)("div",{children:[Object(O.jsx)(D,{accessOk:this.props.accessOk}),Object(O.jsx)("br",{}),Object(O.jsxs)("table",{style:{width:"70%"},children:[Object(O.jsxs)("td",{children:[Object(O.jsx)("p",{children:"Type in Keywords: Apple, BTC, USD, Hong Kong"}),Object(O.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(O.jsx)("label",{children:Object(O.jsx)("textarea",{value:this.state.keyword,style:{width:500,backgroundColor:"#ffffff"},rows:1,onChange:this.handleChange})}),Object(O.jsx)("input",{type:"submit",value:"Search for keyword"})]}),Object(O.jsx)(I,{instrumentData:this.state.data,fetchInstrumentDetails:this.fetchInstrumentDetails})]}),Object(O.jsx)("td",{children:Object(O.jsx)(A,{uicDetails:this.state.uicDetails,token:this.props.token})})]})]})}}]),s}(n.Component),B=function(e){Object(l.a)(s,e);var t=Object(j.a)(s);function s(){return Object(o.a)(this,s),t.apply(this,arguments)}return Object(h.a)(s,[{key:"render",value:function(){return 0===this.props.pageNumber?Object(O.jsx)(K,{token:this.props.token,setAccessToken:this.props.setAccessToken,storeAccessTokenInLocalStorage:this.props.storeAccessTokenInLocalStorage,accessOk:this.props.accessOk,setAccessInvalid:this.props.setAccessInvalid,setAccessOk:this.props.setAccessOk}):1===this.props.pageNumber?Object(O.jsx)(S,{accessOk:this.props.accessOk,token:this.props.token,setAccessInvalid:this.props.setAccessInvalid,setAccessOk:this.props.setAccessOk}):2===this.props.pageNumber?Object(O.jsx)(L,{accessOk:this.props.accessOk,token:this.props.token,setAccessInvalid:this.props.setAccessInvalid,setAccessOk:this.props.setAccessOk}):Object(O.jsxs)("h1",{children:["Hello, ",this.props.pageNumber,", ",this.props.token]})}}]),s}(a.a.Component),F=function(e){Object(l.a)(s,e);var t=Object(j.a)(s);function s(e){var n;return Object(o.a)(this,s),(n=t.call(this,e)).state={pageNumber:0,accessTokenLocalStorageKey:"instrument-tool-accees-rjh391x",token:"x",accessOk:!1},n.setAccessToken=n.setAccessToken.bind(Object(r.a)(n)),n.storeAccessTokenInLocalStorage=n.storeAccessTokenInLocalStorage.bind(Object(r.a)(n)),n.setAccessInvalid=n.setAccessInvalid.bind(Object(r.a)(n)),n.setAccessOk=n.setAccessOk.bind(Object(r.a)(n)),n}return Object(h.a)(s,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem(this.state.accessTokenLocalStorageKey);if(t){this.setState({token:t});fetch("https://gateway.saxobank.com/sim/openapi/port/v1/users/me",{method:"GET",headers:{Authorization:"Bearer "+t}}).then((function(t){200===t.status?e.setAccessOk():e.setAccessInvalid()}))}}},{key:"setAccessToken",value:function(e){this.setState({token:e})}},{key:"setAccessOk",value:function(){this.setState({accessOk:!0})}},{key:"setAccessInvalid",value:function(){this.setState({accessOk:!1})}},{key:"storeAccessTokenInLocalStorage",value:function(e){localStorage.setItem(this.state.accessTokenLocalStorageKey,this.state.token)}},{key:"render",value:function(){var e=this;return Object(O.jsxs)("div",{className:"App",style:{marginLeft:"0%"},children:[Object(O.jsx)(u.a,{square:!0,children:Object(O.jsxs)(b.a,{value:this.state.pageNumber,textColor:"primary",indicatorColor:"primary",onChange:function(t,s){e.setState({pageNumber:s})},children:[Object(O.jsx)(d.a,{label:"Config"}),Object(O.jsx)(d.a,{label:"Exchanges"}),Object(O.jsx)(d.a,{label:"FIND INSTRUMENT"})]})}),Object(O.jsx)(B,{pageNumber:this.state.pageNumber,token:this.state.token,setAccessToken:this.setAccessToken,storeAccessTokenInLocalStorage:this.storeAccessTokenInLocalStorage,accessOk:this.state.accessOk,setAccessInvalid:this.setAccessInvalid,setAccessOk:this.setAccessOk})]})}}]),s}(a.a.Component),z=(s(63),s(37)),G=s(93),M=s(94),U=Object(z.a)({palette:{type:"light",primary:{main:"#000000"}}});i.a.render(Object(O.jsxs)(G.a,{theme:U,children:[Object(O.jsx)(M.a,{}),Object(O.jsx)(F,{})]}),document.getElementById("root"))}},[[64,1,2]]]);
//# sourceMappingURL=main.d5cbfa00.chunk.js.map